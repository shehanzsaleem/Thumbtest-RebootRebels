{"version":3,"sources":["components/utils/upload.png","components/context/model-context.js","components/utils/dimension-hook.js","components/image/useImagePrediction.js","components/image/Detection.js","components/utils/useVideoPrediction.js","components/video/Video.js","components/realtime/useWebcam.js","components/realtime/Realtime.js","components/utils/Selector.js","components/utils/LoadingSpinner.js","App.js","index.js"],"names":["module","exports","ModelContext","createContext","model","fetchModel","labels","fetchLabels","selected","selectMode","useDimension","useState","window","innerWidth","height","width","dimensions","setDimensions","useEffect","handleResize","addEventListener","_","removeEventListener","detectFrame","imageRef","resultRef","a","batched","tf","img","fromPixels","current","resizeBilinear","div","expandDims","toFloat","results","execute","scores","arraySync","dispose","finalScores","map","score","i","label","sort","b","innerHTML","useImagePrediction","loadedImg","Detection","useContext","setLoadedImg","useRef","Fragment","className","accept","multiple","onDrop","accepted","rejected","links","length","reader","FileReader","result","readAsDataURL","src","alt","upload","style","display","ref","videoRef","requestAnimationFrame","err","console","log","useVideoPrediction","shouldRender","Video","frame","setFrame","videoLoaded","setVideoLoaded","onloadeddata","autoPlay","playsInline","muted","useWebcam","webcamLoaded","setWebcamLoaded","navigator","mediaDevices","getUserMedia","audio","video","facingMode","then","stream","srcObject","onloadedmetadata","Realtime","cameraLoaded","Selector","onClick","LoadingSpinner","props","asOverlay","App","setModel","setLabels","loading","setLoading","setSelected","useCallback","loadModel","MODEL_URL","fetch","response","json","Provider","value","textAlign","color","fontWeight","fontSize","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1f139ef5.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,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\"","import { createContext } from 'react';\r\n\r\nexport const ModelContext = createContext({\r\n    model: null,\r\n    fetchModel: (model) => {},\r\n    labels: null,\r\n    fetchLabels: (labels) => {},\r\n    selected: '',\r\n    selectMode: (selected) => {}\r\n});","import { useState, useEffect } from 'react';\r\n\r\nexport const useDimension = () => {\r\n    const [dimensions, setDimensions] = useState(() => { \r\n        if (window.innerWidth > 1000) {\r\n            return {\r\n                height: 650,\r\n                width: 900\r\n            }\r\n        } else if (window.innerWidth > 800) {\r\n            return {\r\n                height: 550,\r\n                width: 700\r\n            }\r\n        } else if (window.innerWidth > 600) {\r\n            return {\r\n                height: 400,\r\n                width: 500\r\n            }\r\n        } else if (window.innerWidth > 400) {\r\n            return {\r\n                height: 280,\r\n                width: 350\r\n            }\r\n        } else {\r\n            return {\r\n                height: 200,\r\n                width: 300\r\n            }\r\n        }\r\n    })\r\n\r\n    useEffect(() => {\r\n        function handleResize() {\r\n            if (window.innerWidth > 1000) {\r\n                setDimensions({\r\n                    height: 650,\r\n                    width: 900\r\n                })\r\n            } else if (window.innerWidth > 800) {\r\n                setDimensions({\r\n                    height: 550,\r\n                    width: 700\r\n                })\r\n            } else if (window.innerWidth > 600) {\r\n                setDimensions({\r\n                    height: 400,\r\n                    width: 500\r\n                })\r\n            } else if (window.innerWidth > 400) {\r\n                setDimensions({\r\n                    height: 280,\r\n                    width: 350\r\n                })\r\n            } else {\r\n                setDimensions({\r\n                    height: 200,\r\n                    width: 300\r\n                })\r\n            }\r\n        }\r\n\r\n        window.addEventListener('resize', handleResize)\r\n\r\n        return _ => {\r\n            window.removeEventListener('resize', handleResize)\r\n        }\r\n    });\r\n\r\n    return dimensions;\r\n}","import { useEffect } from 'react';\r\nimport * as tf from '@tensorflow/tfjs';\r\n\r\nconst detectFrame = async (model, labels, imageRef, resultRef) => {\r\n    const batched = tf.tidy(() => {\r\n        const img = tf.browser.fromPixels(imageRef.current);\r\n        const small = tf.image.resizeBilinear(img, [224, 224]).div(255);\r\n        \r\n        // Reshape to a single-element batch so we can pass it to executeAsync.\r\n        return small.expandDims(0).toFloat();\r\n    });\r\n\r\n    const results = model.execute(batched);\r\n\r\n    const scores = results.arraySync()[0];\r\n\r\n    results.dispose();\r\n    batched.dispose();\r\n\r\n    const finalScores = scores.map((score, i) => ({\r\n        label: labels[i],\r\n        score: score\r\n    }));\r\n        \r\n    finalScores.sort((a, b) => b.score - a.score);\r\n    resultRef.current.innerHTML = finalScores[0].label + ' ' + finalScores[0].score\r\n}\r\n\r\nconst useImagePrediction = (model, labels, loadedImg, imageRef, resultRef) => {\r\n    useEffect(() => {\r\n        if (model && labels && loadedImg && imageRef) {\r\n            detectFrame(model, labels, imageRef, resultRef)\r\n        }\r\n    }, [model, labels, loadedImg, imageRef, resultRef])\r\n}\r\n\r\nexport default useImagePrediction;","import React, {  useState, useRef, useContext } from 'react';\r\nimport { ModelContext } from '../context/model-context';\r\nimport { useDimension } from '../utils/dimension-hook';\r\nimport useImagePrediction from './useImagePrediction';\r\nimport MagicDropzone from 'react-magic-dropzone';\r\nimport upload from '../utils/upload.png';\r\n\r\nconst Detection = () => {\r\n    const { model, labels } = useContext(ModelContext);\r\n    const dimensions = useDimension();\r\n    const [loadedImg, setLoadedImg] = useState(null); \r\n    const imageRef = useRef();\r\n    const resultRef = useRef();\r\n\r\n    useImagePrediction(model, labels, loadedImg, imageRef, resultRef)\r\n\r\n    const onDrop = (accepted, rejected, links) => {\r\n        if (accepted && accepted.length > 0) {\r\n            const reader = new FileReader();\r\n            reader.addEventListener(\"load\", () => {\r\n                setLoadedImg(reader.result);\r\n            });\r\n            reader.readAsDataURL(accepted[0]);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n                <div>\r\n                    <div className=\"center-div\">\r\n                        <div className=\"card\">\r\n                            <MagicDropzone className=\"dropzone\" accept=\"image/jpeg, image/png, .jpg, .jpeg, .png\" multiple={false} onDrop={onDrop}>\r\n                                <div className=\"center-div-wrap\">\r\n                                    {loadedImg ? (\r\n                                        <img className=\"dropzone-image\" src={loadedImg} width=\"100\" alt=\"drop\" />\r\n                                    ) : (\r\n                                        <div>\r\n                                            <div className=\"center-div\">\r\n                                                <img src={upload} width=\"50\" height=\"50\" alt=\"upload\" />\r\n                                            </div>\r\n                                            <div style={{ display: 'block' }}>\r\n                                                <p>Drag/drop files over here</p>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                    )}\r\n                                </div>\r\n                            </MagicDropzone>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"center-div\">\r\n                        {loadedImg && (\r\n                            <div style={{\r\n                                width: `${dimensions.width}px`,\r\n                                height: `${dimensions.height}px`,\r\n                            }}>\r\n                                <div className=\"image-container\">\r\n                                    <img \r\n                                        src={loadedImg} \r\n                                        width={dimensions.width}\r\n                                        height={dimensions.height} \r\n                                        className=\"image-canvas\"\r\n                                        ref={imageRef} \r\n                                        alt=\"ok\" \r\n                                    />\r\n                                </div>\r\n                                {loadedImg && <div className=\"result\" ref={resultRef} />}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default Detection;","import { useEffect } from 'react';\r\nimport * as tf from '@tensorflow/tfjs';\r\n\r\nconst detectFrame = async (model, labels, videoRef, resultRef) => {\r\n    try {\r\n        const batched = tf.tidy(() => {\r\n            const img = tf.browser.fromPixels(videoRef.current);\r\n            const small = tf.image.resizeBilinear(img, [224, 224]).div(255);\r\n            \r\n            // Reshape to a single-element batch so we can pass it to executeAsync.\r\n            return small.expandDims(0).toFloat();\r\n        });\r\n    \r\n        const results = model.execute(batched);\r\n    \r\n        const scores = results.arraySync()[0];\r\n    \r\n        results.dispose();\r\n        batched.dispose();\r\n    \r\n        const finalScores = scores.map((score, i) => ({\r\n            label: labels[i],\r\n            score: score\r\n        }));\r\n            \r\n        finalScores.sort((a, b) => b.score - a.score);\r\n        resultRef.current.innerHTML = finalScores[0].label + ' ' + finalScores[0].score\r\n        requestAnimationFrame(() => {\r\n            detectFrame(model, labels, videoRef, resultRef)\r\n        })\r\n    } catch(err) {\r\n        console.log(err)\r\n    }\r\n}\r\n\r\nconst useVideoPrediction = (model, labels, videoRef, resultRef, shouldRender) => {\r\n    useEffect(() => {\r\n        if (model && labels && shouldRender) {\r\n            detectFrame(model, labels, videoRef, resultRef)\r\n        }\r\n    }, [model, labels, shouldRender, videoRef, resultRef])\r\n}\r\n\r\nexport default useVideoPrediction;","import React, { useState, useRef, useContext } from 'react';\r\nimport { ModelContext } from '../context/model-context';\r\nimport MagicDropzone from 'react-magic-dropzone';\r\nimport { useDimension } from '../utils/dimension-hook';\r\nimport useVideoPrediction from '../utils/useVideoPrediction';\r\nimport upload from '../utils/upload.png';\r\n\r\nconst Video = () => {\r\n    const { model, labels } = useContext(ModelContext);\r\n    const dimensions = useDimension();\r\n    const [frame, setFrame] = useState();\r\n    const [videoLoaded, setVideoLoaded] = useState(false);\r\n    const videoRef = useRef();\r\n    const resultRef = useRef();\r\n\r\n    useVideoPrediction(model, labels, videoRef, resultRef, videoLoaded)\r\n\r\n    const onDrop = (accepted, rejected, links) => {\r\n        setVideoLoaded(false);\r\n        if (accepted && accepted.length > 0) {\r\n            const reader = new FileReader();\r\n            reader.addEventListener(\"load\", () => {\r\n                videoRef.current.src = reader.result;\r\n                setFrame(`${reader.result}#t=0.1`)\r\n                videoRef.current.onloadeddata = () => {\r\n                    setVideoLoaded(true);\r\n                }\r\n            });\r\n            reader.readAsDataURL(accepted[0]);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div>\r\n                <div className=\"center-div\">\r\n                    <div className=\"card\">\r\n                        <MagicDropzone className=\"dropzone\" accept=\"video/mp4, video/x-m4v, video/*\" multiple={false} onDrop={onDrop}>\r\n                            <div className=\"center-div-wrap\">\r\n                                {frame ? (\r\n                                    <video className=\"dropzone-image\" src={frame} width=\"100\" />\r\n                                ) : (\r\n                                    <div>\r\n                                        <div className=\"center-div\">\r\n                                            <img src={upload} width=\"50\" height=\"50\" alt=\"upload\" />\r\n                                        </div>\r\n                                        <div style={{ display: 'block' }}>\r\n                                            <p>Drag/drop files over here</p>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </MagicDropzone>\r\n                    </div>\r\n                </div>\r\n                <div className=\"center-div\">\r\n                        <div style={{\r\n                            width: `${dimensions.width}px`,\r\n                            height: `${dimensions.height}px`,\r\n                        }}>\r\n                            <div className=\"image-container\">\r\n                                <video \r\n                                    autoPlay\r\n                                    playsInline\r\n                                    muted\r\n                                    width={dimensions.width}\r\n                                    height={dimensions.height} \r\n                                    className=\"image-canvas\"   \r\n                                    ref={videoRef} \r\n                                />\r\n                            </div>\r\n                            {videoLoaded && <div className=\"result\" ref={resultRef} />}                               \r\n                        </div>\r\n                </div>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n}\r\n\r\nexport default Video;","import { useState, useEffect, useContext } from 'react'\r\nimport { ModelContext } from '../context/model-context';\r\n\r\nconst useWebcam = (model, videoRef) => {\r\n  const [webcamLoaded, setWebcamLoaded] = useState(false);\r\n  const { selected } = useContext(ModelContext);\r\n\r\n  useEffect(() => {\r\n    if (model && selected === 'Realtime') {\r\n      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n        navigator.mediaDevices\r\n          .getUserMedia({\r\n            audio: false,\r\n            video: {\r\n              facingMode: 'environment'\r\n            }\r\n          })\r\n          .then(stream => {\r\n            // window.stream = stream\r\n            videoRef.current.srcObject = stream\r\n            videoRef.current.onloadedmetadata = () => {\r\n              setWebcamLoaded(true)\r\n            }\r\n          })\r\n      }\r\n    }\r\n  }, [model, videoRef, selected])\r\n  return webcamLoaded\r\n}\r\n\r\nexport default useWebcam\r\n","import React, { useRef, useContext } from 'react';\r\nimport { ModelContext } from '../context/model-context';\r\nimport { useDimension } from '../utils/dimension-hook';\r\nimport useWebcam from './useWebcam';\r\nimport useVideoPrediction from '../utils/useVideoPrediction';\r\n\r\nconst Realtime = () => {\r\n  const { model, labels } = useContext(ModelContext);\r\n  const dimensions = useDimension();\r\n  const videoRef = useRef();\r\n  const resultRef = useRef();\r\n  const cameraLoaded = useWebcam(model, videoRef)\r\n\r\n  useVideoPrediction(model, labels, videoRef, resultRef, cameraLoaded)\r\n\r\n  return (\r\n    <div>\r\n        <div className=\"center-div\">\r\n          <div style={{\r\n              width: `${dimensions.width}px`,\r\n              height: `${dimensions.height}px`,\r\n          }}>\r\n              <div className=\"image-container\">\r\n                  <video\r\n                      autoPlay\r\n                      playsInline\r\n                      muted\r\n                      ref={videoRef}\r\n                      width={dimensions.width}\r\n                      height={dimensions.height} \r\n                      className=\"image-canvas\"\r\n                  />\r\n              </div>\r\n              {cameraLoaded && <div className=\"result\" ref={resultRef} />}\r\n          </div>\r\n        </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Realtime;","import React, { useContext } from 'react';\r\nimport { ModelContext } from '../context/model-context';\r\nimport Detection from '../image/Detection';\r\nimport Video from '../video/Video';\r\nimport Realtime from '../realtime/Realtime';\r\nimport './Selector.css';\r\n\r\nconst Selector = () => {\r\n    const { selected, selectMode } = useContext(ModelContext);\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div className=\"top-div\">\r\n                <div className=\"section-div\">\r\n                    {selected === 'Image' ? (\r\n                        <div className=\"selected-div\" onClick={() => selectMode('Image')}>\r\n                                <div className=\"selected-text\">Upload Image</div>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"deselected-div\" onClick={() => selectMode('Image')}> \r\n                                <div className=\"deselected-text\">Upload Image</div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n                \r\n                <div className=\"section-div\">\r\n                    {selected === 'Video' ? (\r\n                            <div className=\"selected-div\" onClick={() => selectMode('Video')}>\r\n                                <div className=\"selected-text\">Upload Video</div>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"deselected-div\"onClick={() => selectMode('Video')}> \r\n                                <div className=\"deselected-text\">Upload Video</div>\r\n                            </div>\r\n                        )}\r\n                </div>\r\n\r\n                <div className=\"section-div\">\r\n                    {selected === 'Realtime' ? (\r\n                        <div className=\"selected-div\" onClick={() => selectMode('Realtime')}>\r\n                                <div className=\"selected-text\">Open Camera</div>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"deselected-div\" onClick={() => selectMode('Realtime')}>\r\n                            <div className=\"deselected-text\">Open Camera</div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {selected === 'Image' && (\r\n                <Detection />\r\n            )}\r\n            {selected === 'Video' && (\r\n                <Video />\r\n            )}\r\n            {selected === 'Realtime' && (\r\n                <Realtime />\r\n            )}\r\n\r\n        </React.Fragment>\r\n    )\r\n}\r\nexport default Selector;","import React from 'react';\r\nimport './LoadingSpinner.css';\r\n\r\nconst LoadingSpinner = props => {\r\n  return (\r\n    <div className={`${props.asOverlay && 'loading-spinner__overlay'}`}>\r\n      <div className=\"lds-roller\">\r\n        <div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoadingSpinner;","import React, { useState, useCallback } from 'react';\r\nimport * as tf from '@tensorflow/tfjs';\r\nimport { ModelContext } from './components/context/model-context';\r\nimport Selector from './components/utils/Selector';\r\nimport LoadingSpinner from './components/utils/LoadingSpinner';\r\n\r\nconst MODEL_URL = process.env.PUBLIC_URL + '/model/';\r\nconst LABELS_URL = MODEL_URL + 'labels.json';\r\nconst MODEL_JSON = MODEL_URL + 'model.json';\r\n\r\nconst App = () => {\r\n  const [model, setModel] = useState(null);\r\n  const [labels, setLabels] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [selected, setSelected] = useState('');\r\n\r\n  const fetchModel = useCallback((model) => {\r\n      setModel(model);\r\n  }, []);\r\n\r\n  const fetchLabels = useCallback((labels) => {\r\n      setLabels(labels);\r\n  }, []);\r\n\r\n  const selectMode = useCallback((selected) => {\r\n      setSelected(selected)\r\n  }, [])\r\n\r\n  const loadModel = async () => {\r\n    setLoading(true);\r\n    const model = await tf.loadGraphModel(MODEL_JSON);\r\n    fetchModel(model);\r\n    const response = await fetch(LABELS_URL);\r\n    let labels = await response.json();\r\n    fetchLabels(labels)\r\n    setLoading(false);\r\n  }\r\n\r\n  return (\r\n      <ModelContext.Provider \r\n        value={{\r\n          model: model, \r\n          fetchModel: fetchModel, \r\n          labels: labels, \r\n          fetchLabels: fetchLabels,\r\n          selected: selected,\r\n          selectMode: selectMode\r\n        }}>\r\n          <div className=\"header-div\">\r\n            This currently uses a Mobilenetv2 model trained on Rock-Paper-Scissor dataset\r\n          </div>\r\n          <div>\r\n            {model ? (\r\n              <div>\r\n                <Selector />\r\n              </div>\r\n            ) : (\r\n              <div className=\"center-div load-div\">\r\n                  {loading ? (\r\n                    <div style={{ textAlign: 'center' }}>\r\n                      <LoadingSpinner />\r\n                      <p style={{\r\n                        color: '#6e00b8',\r\n                        fontWeight: '500',\r\n                      }}>Loading Model. Please wait a few seconds...</p>\r\n                    </div>\r\n                  ) : (\r\n                    <button className=\"css-btn\" style={{ width: '60%' }} onClick={loadModel}>\r\n                      <p style={{ fontSize: '16px', fontWeight: '500' }}>Load Model</p>\r\n                    </button>\r\n                  )}\r\n              </div>\r\n            )}\r\n          </div>\r\n      </ModelContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\n\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}